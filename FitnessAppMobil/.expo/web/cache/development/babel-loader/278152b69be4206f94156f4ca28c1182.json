{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/katharina/Desktop/Webmo_Melli/ombew-mobilapp-2/FitnessAppMobil/screens/admin/FitnessplanAdmin.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { Agenda } from \"react-native-calendars\";\nimport { styles, buttons } from \"./styles\";\n\nvar FitnessplanAdmin = function (_Component) {\n  _inherits(FitnessplanAdmin, _Component);\n\n  var _super = _createSuper(FitnessplanAdmin);\n\n  function FitnessplanAdmin(props) {\n    var _this;\n\n    _classCallCheck(this, FitnessplanAdmin);\n\n    _this = _super.call(this, props);\n\n    _this.loadEvents = function (day) {\n      var url = _this.props.route.params.url;\n\n      if (!_this.props.route.params.en) {\n        fetch(url + \"/fitnessevents\").then(function (response) {\n          return response.json();\n        }).then(function (events) {\n          return events;\n        }).then(function (events) {\n          _this.setState({\n            events: events\n          });\n\n          var eventsFormatted = {};\n\n          if (events.length) {\n            events.map(function (event) {\n              var day = event.date;\n\n              if (eventsFormatted[day]) {\n                eventsFormatted[day].push(event);\n              } else {\n                eventsFormatted[day] = [event];\n              }\n            });\n\n            _this.setState({\n              eventsFormatted: eventsFormatted\n            });\n          }\n        });\n      } else {\n        fetch(url + \"/fitnessevents/en\").then(function (response) {\n          return response.json();\n        }).then(function (events) {\n          return events;\n        }).then(function (events) {\n          _this.setState({\n            events: events\n          });\n\n          var eventsFormatted = {};\n\n          if (events.length) {\n            events.map(function (event) {\n              var day = event.date;\n\n              if (eventsFormatted[day]) {\n                eventsFormatted[day].push(event);\n              } else {\n                eventsFormatted[day] = [event];\n              }\n            });\n\n            _this.setState({\n              eventsFormatted: eventsFormatted\n            });\n          }\n        });\n      }\n    };\n\n    _this.handleSearch = function (text) {\n      if (text) {\n        var newData = _this.state.events.filter(function (item) {\n          var itemData = item.name ? item.name.toUpperCase() : \"\".toUpperCase();\n          var textData = text.toUpperCase();\n          return itemData.indexOf(textData) > -1;\n        });\n\n        _this.setState({\n          events: newData,\n          search: text\n        });\n\n        var eventsFormatted = {};\n\n        if (_this.state.events.length) {\n          _this.state.events.map(function (event) {\n            var day = event.date;\n\n            if (eventsFormatted[day]) {\n              eventsFormatted[day].push(event);\n            } else {\n              eventsFormatted[day] = [event];\n            }\n          });\n\n          _this.setState({\n            eventsFormatted: eventsFormatted\n          });\n        }\n      } else {\n        _this.setState({\n          search: \"\"\n        });\n\n        _this.loadEvents();\n      }\n    };\n\n    _this._deleteEvent = _this._deleteEvent.bind(_assertThisInitialized(_this));\n    _this.loadEvents = _this.loadEvents.bind(_assertThisInitialized(_this));\n    _this.state = {\n      events: [],\n      eventsFormatted: {},\n      search: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(FitnessplanAdmin, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.loadEvents();\n      this.focusListener = this.props.navigation.addListener(\"focus\", function () {\n        return _this2.loadEvents();\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.focusListener();\n    }\n  }, {\n    key: \"_deleteEvent\",\n    value: function _deleteEvent(id) {\n      var _this3 = this;\n\n      var events = this.state.events;\n      var url = this.props.route.params.url;\n\n      if (!this.props.route.params.en) {\n        fetch(url + \"/fitnessevents/\" + id, {\n          method: \"DELETE\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(function () {\n          _this3.setState({\n            events: events.filter(function (event) {\n              return event.id !== id;\n            })\n          });\n\n          return;\n        }).catch(function (error) {\n          throw error;\n        });\n        this.loadEvents();\n        console.log(\"Gelöscht\");\n      } else {\n        fetch(url + \"/fitnessevents/en/\" + id, {\n          method: \"DELETE\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(function () {\n          _this3.setState({\n            events: events.filter(function (event) {\n              return event.id !== id;\n            })\n          });\n\n          return;\n        }).catch(function (error) {\n          throw error;\n        });\n        this.loadEvents();\n        console.log(\"Deleted\");\n      }\n    }\n  }, {\n    key: \"renderItem\",\n    value: function renderItem(item) {\n      var _this4 = this;\n\n      if (!this.props.route.params.en) {\n        return React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 9\n          }\n        }, React.createElement(Text, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 11\n          }\n        }, item.name), React.createElement(Button, {\n          title: \"Bearbeiten\",\n          onPress: function onPress() {\n            return _this4.props.navigation.navigate(\"EditCalendar\", {\n              id: item.id,\n              name: item.name,\n              date: item.date\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 11\n          }\n        }), React.createElement(Button, {\n          title: \"L\\xF6schen\",\n          onPress: function onPress() {\n            return _this4._deleteEvent(item.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 11\n          }\n        }));\n      } else {\n        return React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 9\n          }\n        }, React.createElement(Text, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 11\n          }\n        }, item.name), React.createElement(Button, {\n          title: \"Edit\",\n          onPress: function onPress() {\n            return _this4.props.navigation.navigate(\"EditCalendar\", {\n              id: item.id,\n              name: item.name,\n              date: item.date,\n              url: _this4.props.route.params.url,\n              en: _this4.props.route.params.en\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 11\n          }\n        }), React.createElement(Button, {\n          title: \"Delete\",\n          onPress: function onPress() {\n            return _this4._deleteEvent(item.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 11\n          }\n        }));\n      }\n    }\n  }, {\n    key: \"renderEmptyDate\",\n    value: function renderEmptyDate() {\n      return React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 7\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 9\n        }\n      }, \"This is empty date!\"));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var eventsFormatted = this.state.eventsFormatted;\n\n      if (!this.props.route.params.en) {\n        return React.createElement(View, {\n          style: styles.layout,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 9\n          }\n        }, React.createElement(TextInput, {\n          style: styles.textInput,\n          style: {\n            borderWidth: 1\n          },\n          placeholder: \"Nach Kurs suchen...\",\n          autoCorrect: false,\n          onChangeText: function onChangeText(text) {\n            _this5.handleSearch(text);\n          },\n          value: this.state.search,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 11\n          }\n        }), React.createElement(Button, {\n          title: \"Kurs zum Kalendar hinzuf\\xFCgen\",\n          onPress: function onPress() {\n            return _this5.props.navigation.navigate(\"AddToCalendar\", {\n              en: _this5.props.route.params.en,\n              url: _this5.props.route.params.url\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 11\n          }\n        }), React.createElement(Agenda, {\n          items: eventsFormatted,\n          loadItemsForMonth: this.loadEvents.bind(this),\n          renderItem: this.renderItem.bind(this),\n          renderEmptyData: function renderEmptyData() {\n            return null;\n          },\n          renderEmptyDate: this.renderEmptyDate.bind(this),\n          events: this.state.eventsFormatted,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 11\n          }\n        }));\n      } else {\n        return React.createElement(View, {\n          style: styles.layout,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 9\n          }\n        }, React.createElement(TextInput, {\n          style: styles.textInput,\n          style: {\n            borderWidth: 1\n          },\n          placeholder: \"Search for a course...\",\n          autoCorrect: false,\n          onChangeText: function onChangeText(text) {\n            _this5.handleSearch(text);\n          },\n          value: this.state.search,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 11\n          }\n        }), React.createElement(TouchableOpacity, {\n          onPress: function onPress() {\n            return _this5.props.navigation.navigate(\"AddToCalendar\", {\n              en: _this5.props.route.params.en,\n              url: _this5.props.route.params.url\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 11\n          }\n        }, React.createElement(Text, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 11\n          }\n        }, \"Add Course to Calendar\")), React.createElement(Agenda, {\n          items: eventsFormatted,\n          loadItemsForMonth: this.loadEvents.bind(this),\n          renderItem: this.renderItem.bind(this),\n          renderEmptyData: function renderEmptyData() {\n            return null;\n          },\n          renderEmptyDate: this.renderEmptyDate.bind(this),\n          events: this.state.eventsFormatted,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 11\n          }\n        }));\n      }\n    }\n  }]);\n\n  return FitnessplanAdmin;\n}(Component);\n\nexport { FitnessplanAdmin as default };","map":{"version":3,"sources":["/Users/katharina/Desktop/Webmo_Melli/ombew-mobilapp-2/FitnessAppMobil/screens/admin/FitnessplanAdmin.js"],"names":["React","Component","Agenda","styles","buttons","FitnessplanAdmin","props","loadEvents","day","url","route","params","en","fetch","then","response","json","events","setState","eventsFormatted","length","map","event","date","push","handleSearch","text","newData","state","filter","item","itemData","name","toUpperCase","textData","indexOf","search","_deleteEvent","bind","focusListener","navigation","addListener","id","method","headers","Accept","catch","error","console","log","navigate","layout","textInput","borderWidth","renderItem","renderEmptyDate"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport { View, Text, Button, TextInput, TouchableOpacity } from \"react-native\";\r\nimport { Agenda } from \"react-native-calendars\";\r\nimport { styles, buttons } from './styles';\r\n\r\nexport default class FitnessplanAdmin extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this._deleteEvent = this._deleteEvent.bind(this);\r\n    this.loadEvents = this.loadEvents.bind(this);\r\n    this.state = {\r\n      events: [],\r\n      eventsFormatted: {},\r\n      search: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadEvents();\r\n    this.focusListener = this.props.navigation.addListener(\"focus\", () =>\r\n      this.loadEvents()\r\n    );\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.focusListener();\r\n  }\r\n\r\n  loadEvents = (day) => {\r\n    const url = this.props.route.params.url;\r\n    if (!this.props.route.params.en) {\r\n      fetch(url + \"/fitnessevents\")\r\n        .then((response) => response.json())\r\n        .then((events) => {\r\n          //console.log(`events: ${JSON.stringify(events)}`);\r\n          return events;\r\n        })\r\n        .then((events) => {\r\n          this.setState({ events: events });\r\n          var eventsFormatted = {};\r\n          if (events.length) {\r\n            events.map((event) => {\r\n              let day = event.date; //.toDate().toISOString().split(\"T\")[0]; // Format to YYYY-MM-DD\r\n              if (eventsFormatted[day]) {\r\n                eventsFormatted[day].push(event);\r\n              } else {\r\n                eventsFormatted[day] = [event];\r\n              }\r\n            });\r\n            this.setState({\r\n              eventsFormatted: eventsFormatted,\r\n            });\r\n            // console.log(`eventsFormatted: ${JSON.stringify(eventsFormatted)}`);\r\n          }\r\n        });\r\n    } else {\r\n      fetch(url + \"/fitnessevents/en\")\r\n        .then((response) => response.json())\r\n        .then((events) => {\r\n          //console.log(`events: ${JSON.stringify(events)}`);\r\n          return events;\r\n        })\r\n        .then((events) => {\r\n          this.setState({ events: events });\r\n          var eventsFormatted = {};\r\n          if (events.length) {\r\n            events.map((event) => {\r\n              let day = event.date; //.toDate().toISOString().split(\"T\")[0]; // Format to YYYY-MM-DD\r\n              if (eventsFormatted[day]) {\r\n                eventsFormatted[day].push(event);\r\n              } else {\r\n                eventsFormatted[day] = [event];\r\n              }\r\n            });\r\n            this.setState({\r\n              eventsFormatted: eventsFormatted,\r\n            });\r\n            // console.log(`eventsFormatted: ${JSON.stringify(eventsFormatted)}`);\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  _deleteEvent(id) {\r\n    const events = this.state.events;\r\n    const url = this.props.route.params.url;\r\n    if (!this.props.route.params.en) {\r\n      fetch(url + \"/fitnessevents/\" + id, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then(() => {\r\n          this.setState({\r\n            events: events.filter((event) => event.id !== id),\r\n          });\r\n          return;\r\n        })\r\n        .catch((error) => {\r\n          throw error;\r\n        });\r\n      this.loadEvents();\r\n      console.log(\"Gelöscht\");\r\n    } else {\r\n      fetch(url + \"/fitnessevents/en/\" + id, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then(() => {\r\n          this.setState({\r\n            events: events.filter((event) => event.id !== id),\r\n          });\r\n          return;\r\n        })\r\n        .catch((error) => {\r\n          throw error;\r\n        });\r\n      this.loadEvents();\r\n      console.log(\"Deleted\");\r\n    }\r\n  }\r\n\r\n  handleSearch = (text) => {\r\n    if (text) {\r\n      const newData = this.state.events.filter(function (item) {\r\n        const itemData = item.name ? item.name.toUpperCase() : \"\".toUpperCase();\r\n        const textData = text.toUpperCase();\r\n        return itemData.indexOf(textData) > -1;\r\n      });\r\n      this.setState({\r\n        events: newData,\r\n        search: text,\r\n      });\r\n      var eventsFormatted = {};\r\n      if (this.state.events.length) {\r\n        this.state.events.map((event) => {\r\n          let day = event.date; //.toDate().toISOString().split(\"T\")[0]; // Format to YYYY-MM-DD\r\n\r\n          if (eventsFormatted[day]) {\r\n            eventsFormatted[day].push(event);\r\n          } else {\r\n            eventsFormatted[day] = [event];\r\n          }\r\n        });\r\n        this.setState({\r\n          eventsFormatted: eventsFormatted,\r\n        });\r\n      }\r\n    } else {\r\n      this.setState({ search: \"\" });\r\n      this.loadEvents();\r\n    }\r\n  };\r\n\r\n  renderItem(item) {\r\n    // console.log(item.name);\r\n    if (!this.props.route.params.en) {\r\n      return (\r\n        <View>\r\n          <Text>{item.name}</Text>\r\n          <Button\r\n            title=\"Bearbeiten\"\r\n            onPress={() =>\r\n              this.props.navigation.navigate(\"EditCalendar\", {\r\n                id: item.id,\r\n                name: item.name,\r\n                date: item.date,\r\n              })\r\n            }\r\n          ></Button>\r\n          <Button\r\n            title=\"Löschen\"\r\n            onPress={() => this._deleteEvent(item.id)}\r\n          ></Button>\r\n        </View>\r\n      );\r\n    } else {\r\n      return (\r\n        <View>\r\n          <Text>{item.name}</Text>\r\n          <Button\r\n            title=\"Edit\"\r\n            onPress={() =>\r\n              this.props.navigation.navigate(\"EditCalendar\", {\r\n                id: item.id,\r\n                name: item.name,\r\n                date: item.date,\r\n                url: this.props.route.params.url,\r\n                en: this.props.route.params.en,\r\n              })\r\n            }\r\n          ></Button>\r\n          <Button\r\n            title=\"Delete\"\r\n            onPress={() => this._deleteEvent(item.id)}\r\n          ></Button>\r\n        </View>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderEmptyDate() {\r\n    return (\r\n      <View>\r\n        <Text>This is empty date!</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const eventsFormatted = this.state.eventsFormatted;\r\n    if (!this.props.route.params.en) {\r\n      return (\r\n        <View style={styles.layout}>\r\n          <TextInput style={styles.textInput}\r\n            style={{ borderWidth: 1 }}\r\n            placeholder=\"Nach Kurs suchen...\"\r\n            autoCorrect={false}\r\n            onChangeText={(text) => {\r\n              this.handleSearch(text);\r\n            }}\r\n            value={this.state.search}\r\n          />\r\n          <Button\r\n            title=\"Kurs zum Kalendar hinzufügen\"\r\n            onPress={() =>\r\n              this.props.navigation.navigate(\"AddToCalendar\", {\r\n                en: this.props.route.params.en,\r\n                url: this.props.route.params.url,\r\n              })\r\n            }\r\n          ></Button>\r\n          <Agenda\r\n            items={eventsFormatted}\r\n            loadItemsForMonth={this.loadEvents.bind(this)}\r\n            renderItem={this.renderItem.bind(this)}\r\n            renderEmptyData={() => null}\r\n            renderEmptyDate={this.renderEmptyDate.bind(this)}\r\n            events={this.state.eventsFormatted}\r\n          />\r\n        </View>\r\n      );\r\n    } else {\r\n      return (\r\n        <View style={styles.layout}>\r\n          <TextInput style={styles.textInput}\r\n            style={{ borderWidth: 1 }}\r\n            placeholder=\"Search for a course...\"\r\n            autoCorrect={false}\r\n            onChangeText={(text) => {\r\n              this.handleSearch(text);\r\n            }}\r\n            value={this.state.search}\r\n          />\r\n          <TouchableOpacity\r\n            onPress={() =>\r\n              this.props.navigation.navigate(\"AddToCalendar\", {\r\n                en: this.props.route.params.en,\r\n                url: this.props.route.params.url,\r\n              })\r\n            }\r\n          >\r\n          <Text>Add Course to Calendar</Text>\r\n          </TouchableOpacity>\r\n          <Agenda\r\n            items={eventsFormatted}\r\n            loadItemsForMonth={this.loadEvents.bind(this)}\r\n            renderItem={this.renderItem.bind(this)}\r\n            renderEmptyData={() => null}\r\n            renderEmptyDate={this.renderEmptyDate.bind(this)}\r\n            events={this.state.eventsFormatted}\r\n          />\r\n        </View>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}